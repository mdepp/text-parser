# Define commands

$SUBJECT = ((the )?(?P<subject>key|rug|box|lock))
$OBJECT = ((the )?(?P<object>key|rug|box|lock))

$LOOKAT = (look at|examine)
$LOOKUNDER = (look|examine) under
$LOOKIN = (look in(side)?)
$TAKE = (take|pick up)
$PUT = (put)

$ACTION = (?P<action>$LOOKAT|$LOOKUNDER|$LOOKIN|$TAKE|$PUT)

$CONNECTOR = (?P<connector>with|on|at|in|under|behind)
$AND = (and|and,|,)

$SUBJECTS = ($SUBJECT( $AND $SUBJECT)*)
$OBJECTS = ($OBJECT( $AND $OBJECT)*)

# Note - subject/object distinction here is more-or-less arbitrary (and also
# probably not technically correct)
$COMMAND = (?P<command>$ACTION $SUBJECTS|$ACTION $SUBJECTS $CONNECTOR $OBJECTS)

$COMMANDS = $COMMAND( $AND $COMMAND)*